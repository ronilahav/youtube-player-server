(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(75),c=n.n(a),i=(n(105),n(19)),u=n(13),l=n(84),s=Object(l.a)("/"),f=function(e){var t=e.onNewVideo;s.on("connect",function(){return console.info("socket connected id:",s.id)}),s.on("new-video",function(e){console.info("new-video",e),t(e)}),s.on("disconnect",function(){return console.info("server disconnected")})},d=function(){return fetch("/api/videos").then(function(e){return e.json()}).then(function(e){if(e.success)return e.data;throw Error(e.error)}).catch(function(e){console.error("Error:",e)})},p=function(e){return fetch("/api/video/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(e.success)return e.data;throw Error(e.error)}).catch(function(e){console.error("Error:",e)})},h=n(57),m=n.n(h),b=n(80);n.n(b)()(m.a);var E=function(e){try{var t=new URL(e).searchParams.get("v");t&&function(e){var t="".concat("https://www.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails&fields=items(snippet,contentDetails)&","&key=AIzaSyDfhTVqAL2i9CTb_mAytU2oJf1hXB3_XbE&id=").concat(e);return fetch(t).then(function(e){return e.json()}).then(function(e){if(e&&e.items){var t=e.items[0],n=t.contentDetails.duration;return{title:t.snippet.title,length:v(n)}}return{}}).catch(function(e){console.error("Error:",e)})}(t).then(function(n){var r,o=n.title,a=n.length;return(r={url:e,embedCode:t,title:o,length:a},fetch("/api/video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){if(e.success)return e.data;throw Error(e.error)}).catch(function(e){console.error("Error:",e)})).catch(function(e){return console.error(e)})})}catch(n){}},v=function(e){return m.a.duration(e).format("h:mm:ss").padStart(4,"0:0")},g={height:"390",width:"640",playerVars:{autoplay:1,controls:0,disablekb:1}},j=n(164),w=n(165),O=n(172),x=n(175),y=Object(j.a)(w.a)({flexDirection:"row",gap:"10px",maxWidth:"500px"}),C=Object(j.a)(function(e){return o.a.createElement(O.a,Object.assign({label:"Enter YouTube video URL",size:"small"},e))})({flex:"1 1 auto"}),D=Object(j.a)(function(e){return o.a.createElement(x.a,Object.assign({variant:"contained"},e))})({maxWidth:"100px",flex:"1 1 auto"}),k=function(e){var t=e.onAdd,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],i=a[1],l=function(){t(c),i("")};return o.a.createElement(y,null,o.a.createElement(C,{value:c,onChange:function(e){return i(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&l()}}),o.a.createElement(D,{onClick:l},"ADD"))},S=n(176),T=n(177),I=n(81),L=n.n(I),R=Object(j.a)(w.a)({flexDirection:"row",justifyContent:"space-between",alignItems:"center",border:"1px solid",padding:"5px",minHeight:"40px",minWidth:"250px",maxWidth:"400px"}),A=Object(j.a)(w.a)({flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:"10px"}),P=Object(j.a)(function(e){return o.a.createElement(S.a,Object.assign({component:"span"},e))})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),W=Object(j.a)(function(e){return o.a.createElement(S.a,Object.assign({component:"span"},e))})({}),F=Object(j.a)(function(e){return o.a.createElement(T.a,e,o.a.createElement(L.a,null))})({}),J=function(e){var t=e.id,n=e.title,r=e.length,a=e.onRemove;return o.a.createElement(R,null,o.a.createElement(A,null,o.a.createElement(P,null,n),r&&o.a.createElement(W,null,r)),o.a.createElement(F,{onClick:function(){return a(t)}}))},V=Object(j.a)(w.a)({border:"1px solid",maxWidth:"500px",height:"100%",overflowY:"auto"}),B=function(e){var t=e.playList,n=e.onRemove;return o.a.createElement(V,null,t.map(function(e){var t=e.id,r=e.title,a=e.length,c=e.url;return o.a.createElement(J,{key:t,id:t,title:r||c,length:a,onRemove:n})}))},N=n(86),U=function(e){var t=e.id,n=e.videoId,r=e.onEnd;return o.a.createElement(N.a,{key:t,id:t,opts:g,videoId:n,onEnd:function(){return r(t)}})},z=Object(j.a)(w.a)({flexDirection:"row",justifyContent:"center",gap:"30px",margin:"50px"}),X=Object(j.a)(w.a)({gap:"10px",height:"390px"});var Y=function(){var e=Object(r.useRef)(!1),t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],l=Object(r.useState)(null),s=Object(u.a)(l,2),h=s[0],m=s[1];Object(r.useEffect)(function(){return e.current||(d().then(function(e){return c(e)}),f({onNewVideo:function(e){return c(function(t){return[].concat(Object(i.a)(t),[e])})}})),function(){e.current=!0}},[]),Object(r.useEffect)(function(){a.length?h&&a[0].id===h.id||m(a[0]):m(null)},[a]);var b=function(e){p(e),c(function(t){return t.filter(function(t){return e!==t.id})})};return o.a.createElement(z,null,o.a.createElement(X,null,o.a.createElement(k,{onAdd:E}),o.a.createElement(B,{playList:a,onRemove:b})),o.a.createElement(U,{id:h&&h.id,videoId:h?h.embedCode:"",onEnd:b}))},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,178)).then(function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Y,null))),_()},98:function(e,t,n){e.exports=n(130)}},[[98,1,2]]]);
//# sourceMappingURL=main.23f0c1e8.chunk.js.map